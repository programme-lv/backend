// Code generated by goa v3.18.2, DO NOT EDIT.
//
// submissions HTTP client CLI support package
//
// Command:
// $ goa gen github.com/programme-lv/backend/design

package client

import (
	"encoding/json"
	"fmt"

	submissions "github.com/programme-lv/backend/gen/submissions"
	goa "goa.design/goa/v3/pkg"
)

// BuildCreateSubmissionPayload builds the payload for the submissions
// createSubmission endpoint from CLI flags.
func BuildCreateSubmissionPayload(submissionsCreateSubmissionBody string) (*submissions.Submission, error) {
	var err error
	var body CreateSubmissionRequestBody
	{
		err = json.Unmarshal([]byte(submissionsCreateSubmissionBody), &body)
		if err != nil {
			return nil, fmt.Errorf("invalid JSON for body, \nerror: %s, \nexample of valid JSON:\n%s", err, "'{\n      \"createdAt\": \"2024-08-08T10:30:00Z\",\n      \"evaluation\": {\n         \"possibleScore\": 100,\n         \"receivedScore\": 85,\n         \"status\": \"completed\",\n         \"uuid\": \"123e4567-e89b-12d3-a456-426614174000\"\n      },\n      \"language\": {\n         \"fullName\": \"Go\",\n         \"id\": \"go\",\n         \"monacoId\": \"go\"\n      },\n      \"submission\": \"print(factorial(5))\",\n      \"task\": {\n         \"cpu_time_limit_seconds\": 0.5,\n         \"default_md_statement\": {\n            \"input\": \"Ievaddatu pirmajā rindā dotas trīs naturālu skaitļu...\",\n            \"notes\": \"Illo officia.\",\n            \"output\": \"Izvaddatu vienīgajā rindā jābūt veselam skaitlim...\",\n            \"scoring\": \"Asperiores quidem omnis illo.\",\n            \"story\": \"Krišjānis ir uzkonstruējis kvadrātveida putekļsūcēju (saīsināti – KP), kas ir neaizstājams palīgs viņa darbnīcas uzkopšanā...\"\n         },\n         \"default_pdf_statement_url\": \"https://dvhk4hiwp1rmf.cloudfront.net/task-pdf-statements/f27386f1b69f3c020335fe7c84316c5da099933832043e6a5820bcdb0cd66a81.pdf\",\n         \"difficulty_rating\": 3,\n         \"examples\": [\n            {\n               \"input\": \"5 9 3\\nA....X..B\\n..X..X.X.\\n.XXX.XX..\\nX.X.X..X.\\n...XX....\\n\",\n               \"md_note\": \"Qui tempora aut ea.\",\n               \"output\": \"10\\n\"\n            },\n            {\n               \"input\": \"5 9 3\\nA....X..B\\n..X..X.X.\\n.XXX.XX..\\nX.X.X..X.\\n...XX....\\n\",\n               \"md_note\": \"Qui tempora aut ea.\",\n               \"output\": \"10\\n\"\n            },\n            {\n               \"input\": \"5 9 3\\nA....X..B\\n..X..X.X.\\n.XXX.XX..\\nX.X.X..X.\\n...XX....\\n\",\n               \"md_note\": \"Qui tempora aut ea.\",\n               \"output\": \"10\\n\"\n            }\n         ],\n         \"illustration_img_url\": \"https://dvhk4hiwp1rmf.cloudfront.net/task-illustrations/bafcc0aa1b4c56faa44f5f3b2a5abd9529af941eb9a9b10f541b436762d4948a.png\",\n         \"memory_limit_megabytes\": 256,\n         \"origin_notes\": {\n            \"lv\": \"Uzdevums parādījās Latvijas 37. informātikas olimpiādes (2023./2024. gads) skolas kārtā.\"\n         },\n         \"origin_olympiad\": \"LIO\",\n         \"published_task_id\": \"kvadrputekl\",\n         \"task_full_name\": \"Kvadrātveida putekļsūcējs\",\n         \"visible_input_subtasks\": [\n            {\n               \"inputs\": [\n                  \"5 5 3\\nA.X..\\nX.B.X\\n....X\\nXX...\\nX.XXX\\n\",\n                  \"6 3 1\\n...\\nXA.\\n.X.\\nX..\\nB..\\n...\\n\",\n                  \"6 4 2\\nX...\\n.AXX\\nX..X\\n.X.X\\nXXXX\\nX.BX\\n\"\n               ],\n               \"subtask\": 1\n            },\n            {\n               \"inputs\": [\n                  \"5 5 3\\nA.X..\\nX.B.X\\n....X\\nXX...\\nX.XXX\\n\",\n                  \"6 3 1\\n...\\nXA.\\n.X.\\nX..\\nB..\\n...\\n\",\n                  \"6 4 2\\nX...\\n.AXX\\nX..X\\n.X.X\\nXXXX\\nX.BX\\n\"\n               ],\n               \"subtask\": 1\n            },\n            {\n               \"inputs\": [\n                  \"5 5 3\\nA.X..\\nX.B.X\\n....X\\nXX...\\nX.XXX\\n\",\n                  \"6 3 1\\n...\\nXA.\\n.X.\\nX..\\nB..\\n...\\n\",\n                  \"6 4 2\\nX...\\n.AXX\\nX..X\\n.X.X\\nXXXX\\nX.BX\\n\"\n               ],\n               \"subtask\": 1\n            },\n            {\n               \"inputs\": [\n                  \"5 5 3\\nA.X..\\nX.B.X\\n....X\\nXX...\\nX.XXX\\n\",\n                  \"6 3 1\\n...\\nXA.\\n.X.\\nX..\\nB..\\n...\\n\",\n                  \"6 4 2\\nX...\\n.AXX\\nX..X\\n.X.X\\nXXXX\\nX.BX\\n\"\n               ],\n               \"subtask\": 1\n            }\n         ]\n      },\n      \"username\": \"coder123\",\n      \"uuid\": \"123e4567-e89b-12d3-a456-426614174000\"\n   }'")
		}
		if body.Evaluation == nil {
			err = goa.MergeErrors(err, goa.MissingFieldError("evaluation", "body"))
		}
		if body.Language == nil {
			err = goa.MergeErrors(err, goa.MissingFieldError("language", "body"))
		}
		if body.Task == nil {
			err = goa.MergeErrors(err, goa.MissingFieldError("task", "body"))
		}
		err = goa.MergeErrors(err, goa.ValidateFormat("body.createdAt", body.CreatedAt, goa.FormatDateTime))
		if body.Task != nil {
			if err2 := ValidateTaskRequestBody(body.Task); err2 != nil {
				err = goa.MergeErrors(err, err2)
			}
		}
		if err != nil {
			return nil, err
		}
	}
	v := &submissions.Submission{
		UUID:       body.UUID,
		Submission: body.Submission,
		Username:   body.Username,
		CreatedAt:  body.CreatedAt,
	}
	if body.Evaluation != nil {
		v.Evaluation = marshalEvaluationRequestBodyToSubmissionsEvaluation(body.Evaluation)
	}
	if body.Language != nil {
		v.Language = marshalProgrammingLangRequestBodyToSubmissionsProgrammingLang(body.Language)
	}
	if body.Task != nil {
		v.Task = marshalTaskRequestBodyToSubmissionsTask(body.Task)
	}

	return v, nil
}

// BuildGetSubmissionPayload builds the payload for the submissions
// getSubmission endpoint from CLI flags.
func BuildGetSubmissionPayload(submissionsGetSubmissionUUID string) (*submissions.GetSubmissionPayload, error) {
	var uuid string
	{
		uuid = submissionsGetSubmissionUUID
	}
	v := &submissions.GetSubmissionPayload{}
	v.UUID = uuid

	return v, nil
}
